{"ast":null,"code":"var _jsxFileName = \"/home/error404_sp/Desktop/rent it/src/SearchPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport \"./SearchPage.css\";\nimport { Button, Chip, FormControl, Input, InputLabel, makeStyles, MenuItem, Select, useTheme } from \"@material-ui/core\";\nimport SearchResult from \"./SearchResult\";\nimport { db, storage } from \"./firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    maxWidth: 300\n  },\n  chips: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  chip: {\n    margin: 2\n  },\n  noLabel: {\n    marginTop: theme.spacing(3)\n  }\n}));\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n};\nconst names = [\"Toilet\", \"Swimming pool\", \"Bed\", \"Billiard table\", \"Sink\", \"Fountain\", \"Oven\", \"Ceiling fan\", \"Television\", \"Microwave oven\", \"Gas stove\", \"Refrigerator\", \"Kitchen & dining room table\", \"Washing machine\", \"Bathtub\", \"Stairs\", \"Fireplace\", \"Pillow\", \"Mirror\", \"Shower\", \"Couch\", \"Countertop\", \"Coffeemaker\", \"Dishwasher\", \"Sofa bed\", \"Tree house\", \"Towel\", \"Porch\", \"Wine rack\", \"Jacuzzi\"];\n\nfunction getStyles(name, personName, theme) {\n  return {\n    fontWeight: personName.indexOf(name) === -1 ? theme.typography.fontWeightRegular : theme.typography.fontWeightMedium\n  };\n}\n\nfunction SearchPage() {\n  _s();\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const [personName, setPersonName] = React.useState([]);\n  const [sortCategory, setSortCategory] = useState(\"title\");\n  const [listings, setListings] = useState([]);\n  const [filteredListings, setFilteredListings] = useState([]);\n\n  const handleChange = event => {\n    setPersonName(event.target.value);\n  };\n\n  useEffect(() => {\n    let tmpListings = listings;\n    tmpListings = tmpListings.filter(listing => {\n      return personName.every(v => {\n        var _listing$data$ameniti;\n\n        return (_listing$data$ameniti = listing.data.amenities) === null || _listing$data$ameniti === void 0 ? void 0 : _listing$data$ameniti.includes(v);\n      });\n    });\n    tmpListings.sort((a, b) => {\n      return a.data[sortCategory] - b.data[sortCategory];\n    }); // console.log(tmpListings);\n\n    setFilteredListings(tmpListings);\n  }, [personName, sortCategory, listings]);\n  useEffect(() => {\n    db.collection(\"listings\").where(\"status\", \"==\", \"verified\").get().then(querySnapshot => {\n      let docs = [];\n      querySnapshot.forEach(doc => {\n        const doc_data = doc.data();\n        let current_doc = {\n          data: doc_data,\n          id: doc.id\n        };\n        storage.ref().child(\"listings\").child(doc.id).list({\n          maxResults: 1\n        }).then(firstImg => {\n          firstImg.items[0].getDownloadURL().then(url => {\n            current_doc[\"imgUrl\"] = url;\n          }).catch(err => console.error(err));\n        }).catch(err => console.error(err));\n        docs.push(current_doc);\n      });\n      setListings(docs); // console.log(docs);\n    }).catch(err => console.error(err));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"searchPage\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"searchPage__info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Stays nearby\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        onClick: () => setSortCategory(\"property\"),\n        children: \"Type of place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        onClick: () => setSortCategory(\"pricing\"),\n        children: \"Price\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        onClick: () => setSortCategory(\"city\"),\n        children: \"City\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        className: classes.formControl,\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          id: \"demo-mutiple-chip-label\",\n          children: \"More Filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: \"demo-mutiple-chip-label\",\n          id: \"demo-mutiple-chip\",\n          multiple: true,\n          value: personName,\n          onChange: handleChange,\n          input: /*#__PURE__*/_jsxDEV(Input, {\n            id: \"select-multiple-chip\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 20\n          }, this),\n          renderValue: selected => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.chips,\n            children: selected.map(value => /*#__PURE__*/_jsxDEV(Chip, {\n              label: value,\n              className: classes.chip\n            }, value, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 15\n          }, this),\n          MenuProps: MenuProps,\n          children: names.map(name => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: name,\n            style: getStyles(name, personName, theme),\n            children: name\n          }, name, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), filteredListings.map(({\n      data: {\n        property,\n        city,\n        title,\n        description,\n        pricing,\n        thumbnailURL\n      },\n      id\n    }, key) => {\n      //   console.log(imgUrl);\n      return /*#__PURE__*/_jsxDEV(SearchResult, {\n        img: thumbnailURL,\n        location: `${property} in ${city}`,\n        title: title,\n        description: description,\n        price: `â‚¹ ${pricing}/ night`,\n        id: id\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchPage, \"EnZ8c8rMy/J4wOBuWHZ1Zif6eyQ=\", false, function () {\n  return [useStyles, useTheme];\n});\n\n_c = SearchPage;\nexport default SearchPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"sources":["/home/error404_sp/Desktop/rent it/src/SearchPage.js"],"names":["React","useState","useEffect","Button","Chip","FormControl","Input","InputLabel","makeStyles","MenuItem","Select","useTheme","SearchResult","db","storage","useStyles","theme","formControl","margin","spacing","minWidth","maxWidth","chips","display","flexWrap","chip","noLabel","marginTop","ITEM_HEIGHT","ITEM_PADDING_TOP","MenuProps","PaperProps","style","maxHeight","width","names","getStyles","name","personName","fontWeight","indexOf","typography","fontWeightRegular","fontWeightMedium","SearchPage","classes","setPersonName","sortCategory","setSortCategory","listings","setListings","filteredListings","setFilteredListings","handleChange","event","target","value","tmpListings","filter","listing","every","v","data","amenities","includes","sort","a","b","collection","where","get","then","querySnapshot","docs","forEach","doc","doc_data","current_doc","id","ref","child","list","maxResults","firstImg","items","getDownloadURL","url","catch","err","console","error","push","selected","map","property","city","title","description","pricing","thumbnailURL","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./SearchPage.css\";\nimport {\n  Button,\n  Chip,\n  FormControl,\n  Input,\n  InputLabel,\n  makeStyles,\n  MenuItem,\n  Select,\n  useTheme,\n} from \"@material-ui/core\";\nimport SearchResult from \"./SearchResult\";\nimport { db, storage } from \"./firebase\";\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    maxWidth: 300,\n  },\n  chips: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n  chip: {\n    margin: 2,\n  },\n  noLabel: {\n    marginTop: theme.spacing(3),\n  },\n}));\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\n\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n};\n\nconst names = [\n  \"Toilet\",\n  \"Swimming pool\",\n  \"Bed\",\n  \"Billiard table\",\n  \"Sink\",\n  \"Fountain\",\n  \"Oven\",\n  \"Ceiling fan\",\n  \"Television\",\n  \"Microwave oven\",\n  \"Gas stove\",\n  \"Refrigerator\",\n  \"Kitchen & dining room table\",\n  \"Washing machine\",\n  \"Bathtub\",\n  \"Stairs\",\n  \"Fireplace\",\n  \"Pillow\",\n  \"Mirror\",\n  \"Shower\",\n  \"Couch\",\n  \"Countertop\",\n  \"Coffeemaker\",\n  \"Dishwasher\",\n  \"Sofa bed\",\n  \"Tree house\",\n  \"Towel\",\n  \"Porch\",\n  \"Wine rack\",\n  \"Jacuzzi\",\n];\n\nfunction getStyles(name, personName, theme) {\n  return {\n    fontWeight:\n      personName.indexOf(name) === -1\n        ? theme.typography.fontWeightRegular\n        : theme.typography.fontWeightMedium,\n  };\n}\nfunction SearchPage() {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [personName, setPersonName] = React.useState([]);\n  const [sortCategory, setSortCategory] = useState(\"title\");\n\n  const [listings, setListings] = useState([]);\n  const [filteredListings, setFilteredListings] = useState([]);\n\n  const handleChange = (event) => {\n    setPersonName(event.target.value);\n  };\n\n  useEffect(() => {\n    let tmpListings = listings;\n    tmpListings = tmpListings.filter((listing) => {\n      return personName.every((v) => listing.data.amenities?.includes(v));\n    });\n    tmpListings.sort((a, b) => {\n      return a.data[sortCategory] - b.data[sortCategory];\n    });\n    // console.log(tmpListings);\n    setFilteredListings(tmpListings);\n  }, [personName, sortCategory, listings]);\n\n  useEffect(() => {\n    db.collection(\"listings\")\n      .where(\"status\", \"==\", \"verified\")\n      .get()\n      .then((querySnapshot) => {\n        let docs = [];\n        querySnapshot.forEach((doc) => {\n          const doc_data = doc.data();\n          let current_doc = { data: doc_data, id: doc.id };\n          storage\n            .ref()\n            .child(\"listings\")\n            .child(doc.id)\n            .list({ maxResults: 1 })\n            .then((firstImg) => {\n              firstImg.items[0]\n                .getDownloadURL()\n                .then((url) => {\n                  current_doc[\"imgUrl\"] = url;\n                })\n                .catch((err) => console.error(err));\n            })\n            .catch((err) => console.error(err));\n          docs.push(current_doc);\n        });\n        setListings(docs);\n        // console.log(docs);\n      })\n      .catch((err) => console.error(err));\n  }, []);\n\n  return (\n    <div className=\"searchPage\">\n      <div className=\"searchPage__info\">\n        <h1>Stays nearby</h1>\n        <Button variant=\"outlined\" onClick={() => setSortCategory(\"property\")}>\n          Type of place\n        </Button>\n        <Button variant=\"outlined\" onClick={() => setSortCategory(\"pricing\")}>\n          Price\n        </Button>\n        <Button variant=\"outlined\" onClick={() => setSortCategory(\"city\")}>\n          City\n        </Button>\n        <FormControl className={classes.formControl}>\n          <InputLabel id=\"demo-mutiple-chip-label\">More Filters</InputLabel>\n          <Select\n            labelId=\"demo-mutiple-chip-label\"\n            id=\"demo-mutiple-chip\"\n            multiple\n            value={personName}\n            onChange={handleChange}\n            input={<Input id=\"select-multiple-chip\" />}\n            renderValue={(selected) => (\n              <div className={classes.chips}>\n                {selected.map((value) => (\n                  <Chip key={value} label={value} className={classes.chip} />\n                ))}\n              </div>\n            )}\n            MenuProps={MenuProps}\n          >\n            {names.map((name) => (\n              <MenuItem\n                key={name}\n                value={name}\n                style={getStyles(name, personName, theme)}\n              >\n                {name}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n\n        {/* <Button variant=\"outlined\" onClick={handleClick}>\n          More filters\n        </Button> \n        <Menu\n          id=\"fade-menu\"\n          anchorEl={anchorEl}\n          keepMounted\n          open={open}\n          onClose={handleClose}\n          TransitionComponent={Fade}\n        >\n          <MenuItem onClick={handleClose}>Profile</MenuItem>\n          <MenuItem onClick={handleClose}>My account</MenuItem>\n          <MenuItem onClick={handleClose}>Logout</MenuItem>\n        </Menu> */}\n      </div>\n      {filteredListings.map(\n        (\n          {\n            data: { property, city, title, description, pricing, thumbnailURL },\n            id,\n          },\n          key\n        ) => {\n          //   console.log(imgUrl);\n          return (\n            <SearchResult\n              img={thumbnailURL}\n              location={`${property} in ${city}`}\n              title={title}\n              description={description}\n              price={`â‚¹ ${pricing}/ night`}\n              id={id}\n              key={key}\n            />\n          );\n        }\n      )}\n    </div>\n  );\n}\n\nexport default SearchPage;\n"]},"metadata":{},"sourceType":"module"}